---
title: 类加载机制
date: 2021-03-20 15:46:19
permalink: /pages/3dea5c/
categories:
  - 程序语言
  - JAVA
tags:
  - 
---

只需要记住下面这5个阶段就行了

![img](https://img.xiaoyou66.com/2021/03/23/6db4376bea983.png)



参考：[JVM 基础 - Java 类加载机制 | Java 全栈知识体系 (pdai.tech)](https://www.pdai.tech/md/java/jvm/java-jvm-classload.html)

下面简单介绍一下每个部分做了啥

- **加载**  首先获取二进制流，然后把字节流所代表的静态存储结构转化为方法区的运行时数据结构，最后在java堆中生成一个代表这个类的java.lang.Class对象，作为数据访问入口
- **验证** 确保被加载类的正确性，分为文件格式验证，元数据验证，字节码验证和符合引用验证
- **准备**  为类的静态变量分配内存，并将其初始化为默认值
- **解析** 把类中的符号引用转换为直接引用
- **初始化** 初始化，为类的静态变量赋予正确的初始值，JVM负责对类进行初始化，主要对类变量进行初始化
- **使用** 类访问方法区内的数据结构的接口， 对象是Heap区的数据
- **卸载** 

## 双亲委派模型

类加载器可以细分为下面几种类型

![image.png](https://img.xiaoyou66.com/2021/03/23/fafa7c8626766.png)

它们之间的层次关系被称为类加载器的**双亲委派模型**。该模型要求除了顶层的启动类加载器外，其余的类加载器都应该有自己的父类加载器，而这种父子关系一般通过**组合（Composition）关系**来实现，而不是通过继承（Inheritance）。

当应用类加载器获取到一个类加载的请求的时候，不会立即处理这个类加载请求，而是将这个请求委派给他的父加载器加载，如果这个父加载器不能够处理这个类加载请求，便将之传递给子加载器。一级一级传递指导可以加载该类的类加载器。

## 类加载器常问问题

