---
title: 垃圾回收
date: 2021-03-20 15:46:19
permalink: /pages/2502a4/
categories:
  - 程序语言
  - JAVA
tags:
  - 
---

## 垃圾回收三种算法

标记删除（mark-sweep）、拷贝（copying）、标记压缩（mark-compact）

- **标记删除**  就是把垃圾区域标记出来，然后清除出去（问题：碎片化）
- **拷贝** 先将内存分成俩半，把要清除的一半有用的区域复制到另一半，然后清除这一半（浪费空间）
- **标记压缩** 对内存进行整理，有用的堆到前面，没用的堆到后面，一边标记一边整理（效率低）

JVM是拷贝和标记整理两个算法结合使用

## Java堆内存逻辑分区（分代模型）

![image-20210323111431114](https://img.xiaoyou66.com/2021/03/23/f040c4f6128b4.png)

- 内存分为俩大块，一个是新生代区域，一个是老年代区域。
- 新生代包括伊甸区、survivor1和survivor2
- 老年代有tenured终身代

### 详细流程

1. 当我们初始化一个对象时，首先会判断是否可以分配到栈上，如果可以就直接分配到栈上，否则就下一步
2. 然后判断是不是大对象，大对象可以直接分配到老年代，小对象需要在判断线程是公有的还是私有的
3. 

![image-20210311100052826](https://img.xiaoyou66.com/2021/03/23/f47791111b4b1.png)



[JVM基础知识和调优_冷雨清的博客-CSDN博客_jvm调优](https://blog.csdn.net/weixin_44777669/article/details/114745089)